{"version":3,"sources":["store/actions/actionTypes.js","store/actions/toolbarActions.js","icons/Icons.jsx","Tools/Tool.js","Tools/Circle.js","Tools/Rect.js","Tools/Star.js","components/Drawer.jsx","components/SettingBar.jsx","Tools/Brush.js","Tools/Line.js","store/actions/canvasActions.js","Tools/Eraser.js","store/reducers/toolbarReducers.js","store/reducers/canvasReducer.js","store/reducers/index.js","store/store.js","Tools/Text.js","components/Toolbar.jsx","components/Canvas.jsx","App.js","index.js"],"names":["actionTypes","toolbarAction","toolbar","dispatch","type","payload","tool","setWidthAction","width","setPositionAction","x","y","setTextAction","text","setToolAction","BrushIcon","height","viewBox","fill","xmlns","d","CircleIcon","SquareIcon","StarIcon","EraserIcon","LineIcon","FigureIcon","UndoIcon","RedoIcon","HamburgerIcon","id","enableBackground","TextIcon","Tool","canvas","socket","updateColor","destroyEvents","onkeydown","onmousemove","onmousedown","onmouseup","this","ctx","getContext","Circle","mouseUpHandler","e","mouseDown","send","JSON","stringify","method","figure","startX","startY","r","color","fillStyle","mouseDownHandler","beginPath","pageX","target","offsetLeft","pageY","offsetTop","saved","toDataURL","mouseMoveHandler","currentX","currentY","Math","sqrt","draw","img","Image","src","onload","clearRect","drawImage","arc","PI","stroke","listen","Rect","console","log","w","h","rect","Star","cx","cy","spikes","strokeStyle","outerRadius","innerRadius","rot","step","strokeSyle","moveTo","i","cos","sin","lineTo","closePath","lineWidth","DrawerSidebar","open","close","Drawer","className","anchor","onClose","onClick","Close","PrettoSlider","withStyles","root","thumb","backgroundColor","border","marginTop","marginLeft","boxShadow","active","valueLabel","left","track","borderRadius","rail","Slider","SettingBar","selectedFigure","useSelector","state","selectedTool","useState","setOpen","canvasState","useDispatch","idx","setIdx","handleClick","toggleOpen","includes","valueLabelDisplay","min","max","onChange","value","aria-label","defaultValue","sessionId","Brush","mouseLeaveHandler","onmouseleave","Line","staticDraw","canvasActions","canvasrChange","Eraser","initialState","userId","localStorage","getItem","undoList","redoList","update","position","rootReducers","combineReducers","toolWidth","parseInt","toolColor","fillColor","strokeColor","undoCanvas","ctxUndo","length","dataUrl","pop","redoCanvas","undo","push","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunk","store","createStore","rootReducer","applyMiddleware","configureStore","Text","clickHandler","getState","posX","posY","onclick","font","fillText","Toolbar","changeColor","setChangeColor","Tooltip","title","placement","TextClass","colorChangeAction","undoAction","Canvas","canvasRef","useRef","textRef","useEffect","current","focus","useParams","WebSocket","onopen","socketAction","onmessage","event","msg","parse","data","drawHandler","undoFn","redoFn","typingFn","autoFocus","ref","style","top","display","onBlur","onMouseDown","App","path","to","Date","toString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8209520d.chunk.js","sourcesContent":["export const actionTypes = {\r\n\tSET_CANVAS: \"SET_CANVAS\",\r\n\tSET_TOOLBAR: \"SET_TOOLBAR\",\r\n\tSET_COLOR: \"SET_COLOR\",\r\n\tSET_WIDTH: \"SET_WIDTH\",\r\n\tSET_METHOD: \"SET_METHOD\",\r\n\tUNDO: \"UNDO\",\r\n\tREDO: \"REDO\",\r\n\tPUSH_UNDO: \"PUSH_UNDO\",\r\n\tSET_SOCKET: \"SET_SOCKET\",\r\n\tSET_SESSIONID: \"SET_SESSIONID\",\r\n\tUPDATE_UNDO_CANVAS: \"UPDATE_UNDO_CANVAS\",\r\n\tUPDATE_REDO_CANVAS: \"UPDATE_REDO_CANVAS\",\r\n\tUPDATE_TEXTAREA: \"UPDATE_TEXTAREA\",\r\n\tUPDATE_TEXT: \"UPDATE_TEXT\",\r\n\tSET_TOOL: \"SET_TOOL\",\r\n}\r\n","import {actionTypes} from './actionTypes'\r\n\r\nconst toolbarChange = (tool) => ({\r\n\ttype: actionTypes.SET_TOOLBAR,\r\n\tpayload: {tool}\r\n})\r\n\r\n\r\n\r\nexport const toolbarAction = (toolbar) => dispatch => {\r\n\tdispatch(toolbarChange(toolbar))\r\n}\r\n\r\n\r\n\r\nexport const colorChangeAction = color => ({\r\n\ttype: actionTypes.SET_COLOR,\r\n\tpayload: {color}\r\n})\r\n\r\n\r\nexport const setWidthAction = width => ({\r\n\ttype: actionTypes.SET_WIDTH,\r\n\tpayload: {width}\r\n})\r\n\r\n\r\nexport const setMethodAction = method => ({\r\n\ttype: actionTypes.SET_METHOD,\r\n\tpayload: {method}\r\n})\r\n\r\nexport const setPositionAction = (x, y) => ({\r\n\ttype: actionTypes.UPDATE_TEXTAREA,\r\n\tpayload: {x, y}\r\n})\r\n\r\n\r\nexport const setTextAction = text => ({\r\n\ttype: actionTypes.UPDATE_TEXT,\r\n\tpayload: {text}\r\n})\r\n\r\n\r\n\r\nexport const setToolAction = tool => ({\r\n\ttype: actionTypes.SET_TOOL,\r\n\tpayload: {tool}\r\n})\r\n","export const BrushIcon = () => (\r\n\t<svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<path d=\"M23.4761 0.227766C23.6579 0.0649669 23.8848 -0.0151916 24.114 0.00238078C24.3432 0.0199532 24.5589 0.134044 24.7206 0.323176C24.8818 0.507435 24.98 0.752993 24.9972 1.01459C25.0145 1.27619 24.9496 1.5362 24.8145 1.74669C23.2654 4.16629 18.2595 11.8468 14.2363 16.5085C13.0675 17.8633 11.8987 18.8804 11.023 19.554C10.1867 20.2009 9.10189 20.0005 8.39075 19.1781C7.70595 18.3843 7.51828 17.1802 8.04176 16.2337C8.61133 15.1995 9.5019 13.8046 10.7448 12.4612C14.8947 7.97696 21.4053 2.08063 23.4761 0.227766Z\" fill=\"black\"/>\r\n\t\t<path d=\"M9.95628 21.1836C9.95628 22.1958 9.60941 23.1665 8.99198 23.8822C8.37455 24.5979 7.53714 25 6.66396 25C5.0178 25 3.37165 25 0.902409 24.0459C-1.56683 23.0918 1.72549 22.1377 2.54857 21.1836C3.37165 20.2295 4.84496 17.3672 6.66396 17.3672C7.53714 17.3672 8.37455 17.7693 8.99198 18.485C9.60941 19.2007 9.95628 20.1714 9.95628 21.1836Z\" fill=\"black\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\n\r\nexport const CircleIcon = () => (\r\n\t<svg  xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\r\n\t\t\t\tviewBox=\"0 0 512 512\" >\r\n\r\n\t\t<path d=\"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M256,490.667\r\n\t\t\tC126.604,490.667,21.333,385.396,21.333,256S126.604,21.333,256,21.333S490.667,126.604,490.667,256S385.396,490.667,256,490.667z\r\n\t\t\t\"/>\r\n\r\n\t</svg>\r\n)\r\nexport const SquareIcon = () => (\r\n\t<svg  xmlns=\"http://www.w3.org/2000/svg\"  x=\"0px\" y=\"0px\"\r\n\t\t\t\tviewBox=\"0 0 60 60\" >\r\n\t\t<path d=\"M49.001,0H10.999C4.934,0,0,4.934,0,10.999v38.003C0,55.066,4.934,60,10.999,60h38.002C55.065,60,60,55.066,60,49.001\r\n\tV10.999C60,4.934,55.065,0,49.001,0z M58,49.001C58,53.963,53.963,58,49.001,58H10.999C6.037,58,2,53.963,2,49.001V10.999\r\n\tC2,6.037,6.037,2,10.999,2h38.002C53.963,2,58,6.037,58,10.999V49.001z\"/>\r\n\r\n\t</svg>\r\n)\r\nexport const StarIcon = () => (\r\n\t<svg height=\"511pt\" viewBox=\"0 -10 511.98685 511\" width=\"511pt\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m114.59375 491.140625c-5.609375 0-11.179688-1.75-15.933594-5.1875-8.855468-6.417969-12.992187-17.449219-10.582031-28.09375l32.9375-145.089844-111.703125-97.960937c-8.210938-7.167969-11.347656-18.519532-7.976562-28.90625 3.371093-10.367188 12.542968-17.707032 23.402343-18.710938l147.796875-13.417968 58.433594-136.746094c4.308594-10.046875 14.121094-16.535156 25.023438-16.535156 10.902343 0 20.714843 6.488281 25.023437 16.511718l58.433594 136.769532 147.773437 13.417968c10.882813.980469 20.054688 8.34375 23.425782 18.710938 3.371093 10.367187.253906 21.738281-7.957032 28.90625l-111.703125 97.941406 32.9375 145.085938c2.414063 10.667968-1.726562 21.699218-10.578125 28.097656-8.832031 6.398437-20.609375 6.890625-29.910156 1.300781l-127.445312-76.160156-127.445313 76.203125c-4.308594 2.558594-9.109375 3.863281-13.953125 3.863281zm141.398438-112.875c4.84375 0 9.640624 1.300781 13.953124 3.859375l120.277344 71.9375-31.085937-136.941406c-2.21875-9.746094 1.089843-19.921875 8.621093-26.515625l105.472657-92.5-139.542969-12.671875c-10.046875-.917969-18.6875-7.234375-22.613281-16.492188l-55.082031-129.046875-55.148438 129.066407c-3.882812 9.195312-12.523438 15.511718-22.546875 16.429687l-139.5625 12.671875 105.46875 92.5c7.554687 6.613281 10.859375 16.769531 8.621094 26.539062l-31.0625 136.9375 120.277343-71.914062c4.308594-2.558594 9.109376-3.859375 13.953126-3.859375zm-84.585938-221.847656s0 .023437-.023438.042969zm169.128906-.0625.023438.042969c0-.023438 0-.023438-.023438-.042969zm0 0\"/></svg>\r\n)\r\n\r\nexport const EraserIcon = () => (\r\n\t<svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<path d=\"M25 7.89269C24.9992 7.60318 24.9436 7.31669 24.8364 7.04977C24.7292 6.78284 24.5725 6.54075 24.3754 6.33748L18.9545 0.622084C18.5535 0.222743 18.021 0 17.4673 0C16.9136 0 16.381 0.222743 15.9801 0.622084L0.617192 16.6641C0.224855 17.0777 0.00470951 17.6367 0.00470951 18.2193C0.00470951 18.8019 0.224855 19.3609 0.617192 19.7745L4.11214 23.4448H0.743605C0.546389 23.4448 0.35725 23.5267 0.217797 23.6725C0.0783438 23.8184 0 24.0162 0 24.2224C0 24.4286 0.0783438 24.6264 0.217797 24.7722C0.35725 24.9181 0.546389 25 0.743605 25H19.3337C19.5309 25 19.7201 24.9181 19.8595 24.7722C19.999 24.6264 20.0773 24.4286 20.0773 24.2224C20.0773 24.0162 19.999 23.8184 19.8595 23.6725C19.7201 23.5267 19.5309 23.4448 19.3337 23.4448H10.9607L24.3456 9.4479C24.5482 9.24723 24.7103 9.00631 24.8227 8.73926C24.9351 8.47222 24.9953 8.18441 25 7.89269ZM8.85634 23.4448H6.21654L1.67311 18.6936C1.61488 18.6329 1.56868 18.5608 1.53715 18.4814C1.50562 18.402 1.48939 18.3169 1.48939 18.2309C1.48939 18.145 1.50562 18.0599 1.53715 17.9805C1.56868 17.9011 1.61488 17.829 1.67311 17.7683L5.77038 13.4759L12.0836 20.07L8.85634 23.4448ZM23.3269 8.3126L13.1321 18.9736L6.82629 12.3717L17.0137 1.71851C17.1327 1.59922 17.2912 1.53262 17.4561 1.53262C17.621 1.53262 17.7795 1.59922 17.8986 1.71851L23.3269 7.38725C23.4448 7.51135 23.5116 7.67885 23.5128 7.85381C23.5128 7.93942 23.4964 8.02416 23.4645 8.10298C23.4325 8.1818 23.3857 8.25309 23.3269 8.3126Z\" fill=\"black\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\nexport const LineIcon = () => (\r\n\t<svg width=\"22\" height=\"19\" viewBox=\"0 0 22 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<path d=\"M19.1274 0.158655L0.193206 15.7068C0.0869428 15.7941 0.0951929 15.9814 0.21154 16.1231L1.69232 17.9263C1.80866 18.068 1.9908 18.1126 2.09706 18.0253L21.0313 2.47713C21.1375 2.38987 21.1293 2.20255 21.0129 2.06087L19.5322 0.257609C19.4158 0.115924 19.2337 0.0713948 19.1274 0.158655Z\" fill=\"black\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\nexport const ColorsIcon = () => (\r\n\t<svg width=\"25\" height=\"25\" viewBox=\"0 0 25 25\" fill=\"none\" >\r\n\t\t<rect width=\"25\" height=\"24.4186\" fill=\"url(#pattern0)\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\nexport const FigureIcon = () => (\r\n\t<svg  xmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 512 512\" >\r\n\t\t<path d=\"M198.718,293.281H20c-11.046,0-20,8.954-20,20V492c0,11.046,8.954,20,20,20h178.718c11.046,0,20-8.954,20-20V313.281\r\n\t\t\t\tC218.718,302.235,209.764,293.281,198.718,293.281z M178.718,472H40V333.281h138.718V472z\"/>\r\n\t\t<path d=\"M304.511,299.139c-7.81-7.811-20.473-7.81-28.284,0c-7.811,7.81-7.811,20.474,0,28.284l171.844,171.845\r\n\t\t\t\tc7.81,7.809,20.472,7.811,28.284,0c7.811-7.81,7.811-20.474,0-28.285L304.511,299.139z\"/>\r\n\t\t<path d=\"M509.889,212.687L409.073,11.056C405.685,4.28,398.76,0,391.185,0s-14.5,4.28-17.889,11.056L272.48,212.687\r\n\t\t\t\tc-3.1,6.2-2.769,13.563,0.875,19.459c3.645,5.896,10.082,9.485,17.013,9.485H492c6.932,0,13.369-3.589,17.013-9.485\r\n\t\t\t\tC512.657,226.249,512.988,218.887,509.889,212.687z M322.73,201.631l68.455-136.909l68.455,136.909H322.73z\"/>\r\n\t\t<path d=\"M120.815,0C54.198,0,0,54.197,0,120.815S54.198,241.63,120.815,241.63S241.63,187.433,241.63,120.815\r\n\t\t\t\tS187.433,0,120.815,0z M120.815,201.631C76.253,201.631,40,165.377,40,120.815S76.253,40,120.815,40s80.815,36.254,80.815,80.815\r\n\t\t\t\tC201.63,165.376,165.377,201.631,120.815,201.631z\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\nexport const UndoIcon = () => (\r\n\t<svg height=\"496pt\" viewBox=\"0 0 496 496.00305\" width=\"496pt\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m406.027344 134.035156c-33.34375-26.613281-72.457032-45.042968-114.207032-53.816406-30.4375-4.339844-61.089843-6.996094-91.816406-7.953125v-64.265625c0-3.132812-1.828125-5.980469-4.679687-7.277344-2.855469-1.300781-6.203125-.816406-8.570313 1.238282l-184 160c-1.746094 1.519531-2.753906 3.722656-2.753906 6.039062 0 2.320312 1.007812 4.523438 2.753906 6.042969l184 160c2.367188 2.054687 5.714844 2.539062 8.570313 1.238281 2.851562-1.296875 4.679687-4.144531 4.679687-7.28125v-64c32.0625-.582031 63.746094 7.03125 92.039063 22.128906 39.726562 21.34375 71.855469 54.484375 91.960937 94.847656 11.730469 25.308594 17.707032 52.90625 17.496094 80.800782.054688 8.433594-.414062 16.859375-1.410156 25.234375-.410156 3.285156 1.246094 6.484375 4.171875 8.046875 2.921875 1.5625 6.5 1.160156 9.007812-1.007813 51.945313-44.195312 82.132813-108.769531 82.734375-176.96875-.664062-71.507812-33.765625-138.84375-89.976562-183.046875zm11.375 334.144532c.050781-2.082032.074218-4.214844.074218-6.402344.210938-30.246094-6.277343-60.164063-19.007812-87.597656-21.535156-43.378907-55.988281-79.015626-98.617188-102-32.148437-17.128907-68.246093-25.46875-104.648437-24.179688h-3.3125c-4.375.0625-7.886719 3.628906-7.886719 8v54.449219l-163.808594-142.449219 163.808594-142.445312v54.445312c0 4.347656 3.464844 7.898438 7.808594 8 32.332031.882812 64.597656 3.503906 96.648438 7.859375 39.304687 8.25 76.132812 25.582031 107.542968 50.613281 52.421875 41.191406 83.320313 103.945313 84 170.609375-.058594 56.664063-22.566406 110.996094-62.601562 151.097657zm0 0\"/></svg>\r\n)\r\n\r\nexport const RedoIcon = () => (\r\n\t<svg height=\"496pt\" viewBox=\"0 0 496 496.00305\" width=\"496pt\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m493.25 161.960938-184-160c-2.367188-2.054688-5.714844-2.539063-8.566406-1.238282-2.851563 1.296875-4.683594 4.144532-4.683594 7.277344v64.265625c-30.722656.957031-61.375 3.613281-91.804688 7.953125-41.753906 8.773438-80.871093 27.203125-114.21875 53.816406-56.210937 44.203125-89.308593 111.539063-89.976562 183.046875.609375 68.203125 30.808594 132.777344 82.761719 176.96875 2.503906 2.167969 6.085937 2.570313 9.007812 1.007813s4.578125-4.761719 4.167969-8.046875c-.992188-8.375-1.464844-16.800781-1.40625-25.234375-.222656-27.894532 5.746094-55.488282 17.46875-80.800782 20.109375-40.351562 52.234375-73.480468 91.953125-94.824218 28.292969-15.105469 59.980469-22.730469 92.046875-22.152344v64c0 3.136719 1.832031 5.984375 4.683594 7.28125 2.851562 1.300781 6.199218.816406 8.566406-1.238281l184-160c1.75-1.519531 2.753906-3.722657 2.753906-6.042969 0-2.316406-1.003906-4.519531-2.753906-6.039062zm-181.25 148.488281v-54.449219c0-4.386719-3.53125-7.953125-7.917969-8-43.382812-.261719-77.679687 7.273438-107.9375 24.179688-42.621093 22.988281-77.074219 58.621093-98.605469 102-12.730468 27.433593-19.222656 57.351562-19.007812 87.597656 0 2.183594.023438 4.316406.070312 6.402344-40.03125-40.101563-62.542968-94.433594-62.601562-151.097657.679688-66.664062 31.578125-129.417969 84-170.609375 31.402344-25.027344 68.222656-42.359375 107.523438-50.613281 32.058593-4.355469 64.328124-6.976563 96.671874-7.859375 4.339844-.101562 7.808594-3.652344 7.804688-8v-54.445312l163.808594 142.445312zm0 0\"/></svg>\r\n)\r\n\r\nexport const HamburgerIcon = () => (\r\n\t<svg id=\"light\" enableBackground=\"new 0 0 24 24\" height=\"512\" viewBox=\"0 0 24 24\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m12 24c-6.617 0-12-5.383-12-12s5.383-12 12-12 12 5.383 12 12-5.383 12-12 12zm0-23c-6.065 0-11 4.935-11 11s4.935 11 11 11 11-4.935 11-11-4.935-11-11-11z\"/><path d=\"m16.5 8h-9c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h9c.276 0 .5.224.5.5s-.224.5-.5.5z\"/><path d=\"m16.5 12.5h-9c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h9c.276 0 .5.224.5.5s-.224.5-.5.5z\"/><path d=\"m16.5 17h-9c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h9c.276 0 .5.224.5.5s-.224.5-.5.5z\"/></svg>\r\n)\r\n\r\n\r\nexport const RangeSliderIcon = () => (\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" id=\"Layer_1\" data-name=\"Layer 1\" viewBox=\"0 0 146.75 45\">\r\n\t\t<path className=\"cls-1\" d=\"M6 22.77l118.7-9.67a9.7 9.7 0 1 1 1.58 19.34 10.47 10.47 0 0 1-1.58 0z\" id=\"_Group_\"\r\n\t\t\t\t\tdata-name=\"&lt;Group&gt;\"/>\r\n\t</svg>\r\n)\r\n\r\n\r\nexport const TextIcon = () => (\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"42\" height=\"42\" viewBox=\"0 0 42 42\"><path d=\"M29.92 11.75v4.52h-.57a8.31 8.31 0 0 0-.89-2 3.36 3.36 0 0 0-1.35-1.07 4.51 4.51 0 0 0-1.68-.2h-2.37v13.32a5.26 5.26 0 0 0 .15 1.68 3.24 3.24 0 0 0 .57.9 1.73 1.73 0 0 0 1.15.58h1.25v.81H16v-.85h1.09a1.85 1.85 0 0 0 1.2-.6 2.06 2.06 0 0 0 .5-.77 7.06 7.06 0 0 0 .12-1.75V13h-2.3a3.63 3.63 0 0 0-2.51.56 5.86 5.86 0 0 0-1.39 2.74h-.63v-4.55h17.84m.95-.95H11.13v6.42h2.37l.17-.73a5 5 0 0 1 1.11-2.26 3.23 3.23 0 0 1 1.86-.3H18v12.39a7.37 7.37 0 0 1-.07 1.44 1.11 1.11 0 0 1-.26.39 1 1 0 0 1-.54.34h-2v2.71h12.01v-2.71h-2.2a.82.82 0 0 1-.49-.31 2.32 2.32 0 0 1-.37-.62 7 7 0 0 1-.08-1.24v-12.4h1.43a4.34 4.34 0 0 1 1.27.08 2.41 2.41 0 0 1 1 .76 7.44 7.44 0 0 1 .77 1.79l.21.66h2.2V10.8z\"/></svg>\r\n)\r\n","export default class Tool {\r\n\tconstructor(canvas, socket, id, updateColor) {\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.socket = socket\r\n\t\tthis.id = id\r\n\t\tthis.updateColor = updateColor\r\n\t\tthis.ctx = canvas.getContext('2d')\r\n\t\tthis.destroyEvents()\r\n\t}\r\n\r\n\r\n\r\n\tdestroyEvents = () => {\r\n\t\tthis.canvas.onkeydown = null\r\n\t\tthis.canvas.onmousemove = null\r\n\t\tthis.canvas.onmousedown = null\r\n\t\tthis.canvas.onmouseup = null\r\n\t}\r\n}\r\n","import Tool from './Tool'\r\n\r\nexport default class Circle extends Tool {\r\n\tconstructor(canvas, socket, id) {\r\n\t\tsuper(canvas, socket, id);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten () {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t}\r\n\r\n\tmouseUpHandler = (e) =>  {\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod: 'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'circle',\r\n\t\t\t\tx: this.startX,\r\n\t\t\t\ty: this.startY,\r\n\t\t\t\tr: this.r,\r\n\t\t\t\tcolor: this.ctx.fillStyle\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.startX = e.pageX  - e.target.offsetLeft\r\n\t\tthis.startY = e.pageY - e.target.offsetTop\r\n\t\tthis.saved = this.canvas.toDataURL()\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif(this.mouseDown) {\r\n\t\t\tthis.currentX = e.pageX  - e.target.offsetLeft;\r\n\t\t\tthis.currentY = e.pageY - e.target.offsetTop;\r\n\t\t\tthis.width  = this.currentX  - this.startX;\r\n\t\t\tthis.height = this.currentY  - this.startY\r\n\t\t\tthis.r = Math.sqrt(this.width**2 + this.height**2)\r\n\t\t\tthis.draw(this.startX, this.startY, this.r)\r\n\t\t}\r\n\t}\r\n\tdraw  = (x, y, r) => {\r\n\t\tconst img = new Image()\r\n\t\timg.src = this.saved\r\n\t\timg.onload = () => {\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.drawImage(img, 0, 0,  this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.beginPath()\r\n\t\t\tthis.ctx.arc(x, y, r,0, Math.PI * 2)\r\n\t\t\tthis.ctx.stroke()\r\n\t\t}\r\n\t}\r\n\r\n\tstatic staticDraw(ctx, x, y, r, color) {\r\n\t\tctx.fillStyle = color;\r\n\t\tctx.beginPath()\r\n\t\tctx.arc(x, y, r,0, Math.PI * 2)\r\n\t\tctx.stroke()\r\n\t}\r\n}\r\n","import Tool from './Tool'\r\n\r\nexport default class Rect extends Tool {\r\n\tconstructor(canvas, socket, id) {\r\n\t\tsuper(canvas, socket, id);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten () {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t}\r\n\r\n\tmouseUpHandler = (e) =>  {\r\n\t\tconsole.log(this)\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod: 'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'rect',\r\n\t\t\t\tx: this.startX,\r\n\t\t\t\ty: this.startY,\r\n\t\t\t\tw: this.width,\r\n\t\t\t\th: this.height,\r\n\t\t\t\tcolor: this.ctx.fillStyle\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.startX = e.pageX  - e.target.offsetLeft\r\n\t\tthis.startY = e.pageY - e.target.offsetTop\r\n\t\tthis.saved = this.canvas.toDataURL()\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif(this.mouseDown) {\r\n\t\t\tlet currentX = e.pageX  - e.target.offsetLeft;\r\n\t\t\tlet currentY = e.pageY - e.target.offsetTop;\r\n\t\t\tthis.width  = currentX  - this.startX;\r\n\t\t\tthis.height = currentY  - this.startY\r\n\t\t\tthis.draw(this.startX, this.startY, this.width, this.height)\r\n\t\t}\r\n\t}\r\n\tdraw  = (x, y, w, h) => {\r\n\t\tconst img = new Image()\r\n\t\timg.src = this.saved\r\n\t\timg.onload = () => {\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.drawImage(img, 0, 0,  this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.beginPath()\r\n\t\t\tthis.ctx.rect(x, y, w, h)\r\n\t\t\tthis.ctx.stroke()\r\n\t\t}\r\n\t}\r\n\r\n\tstatic staticDraw (ctx, x, y, w, h, color) {\r\n\t\tctx.fillStyle = color\r\n\t\tctx.beginPath()\r\n\t\tctx.rect(x,y,w,h)\r\n\t\tctx.stroke()\r\n\t}\r\n\r\n}\r\n","import Tool from './Tool'\r\n\r\nexport default class Star extends Tool {\r\n\tconstructor(canvas, socket, id) {\r\n\t\tsuper(canvas, socket, id);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten () {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t}\r\n\r\n\tmouseUpHandler = (e) =>  {\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod: 'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'star',\r\n\t\t\t\tcx: this.startX,\r\n\t\t\t\tcy: this.startY,\r\n\t\t\t\tspikes: 5,\r\n\t\t\t\tcolor: this.ctx.strokeStyle,\r\n\t\t\t\touterRadius: 30,\r\n\t\t\t\tinnerRadius: 15\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.startX = e.pageX  - e.target.offsetLeft\r\n\t\tthis.startY = e.pageY - e.target.offsetTop\r\n\t\tthis.saved = this.canvas.toDataURL()\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif(this.mouseDown) {\r\n\t\t\tthis.currentX = e.pageX  - e.target.offsetLeft;\r\n\t\t\tthis.currentY = e.pageY - e.target.offsetTop;\r\n\t\t\tthis.width  = this.currentX  - this.startX;\r\n\t\t\tthis.height = this.currentY  - this.startY\r\n\t\t\tthis.r = Math.sqrt(this.width**2 + this.height**2)\r\n\t\t\t// this.draw(this.startX, this.startY, this.r)\r\n\t\t}\r\n\t}\r\n\tdraw  = (x, y, r) => {\r\n\t\tconst img = new Image()\r\n\t\timg.src = this.saved\r\n\t\timg.onload = () => {\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.drawImage(img, 0, 0,  this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.beginPath()\r\n\t\t\tthis.ctx.arc(x, y, r,0, Math.PI * 2)\r\n\t\t\tthis.ctx.stroke()\r\n\t\t}\r\n\t}\r\n\r\n\tstatic staticDraw(ctx, cx, cy, spikes, outerRadius, innerRadius, color) {\r\n\t\tvar rot = Math.PI / 2 * 3;\r\n\t\tvar x = cx;\r\n\t\tvar y = cy;\r\n\t\tvar step = Math.PI / spikes;\r\n\r\n\t\tctx.strokeSyle = \"#000\";\r\n\t\tctx.beginPath();\r\n\t\tctx.moveTo(cx, cy - outerRadius)\r\n\t\tfor (let i = 0; i < spikes; i++) {\r\n\t\t\tx = cx + Math.cos(rot) * outerRadius;\r\n\t\t\ty = cy + Math.sin(rot) * outerRadius;\r\n\t\t\tctx.lineTo(x, y)\r\n\t\t\trot += step\r\n\r\n\t\t\tx = cx + Math.cos(rot) * innerRadius;\r\n\t\t\ty = cy + Math.sin(rot) * innerRadius;\r\n\t\t\tctx.lineTo(x, y)\r\n\t\t\trot += step\r\n\t\t}\r\n\t\tctx.lineTo(cx, cy - outerRadius)\r\n\t\tctx.closePath();\r\n\t\tctx.lineWidth=5;\r\n\t\tctx.strokeStyle=color;\r\n\t\tctx.stroke();\r\n\t\tctx.fillStyle=color;\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport {Drawer} from '@material-ui/core'\r\nimport {Close} from '@material-ui/icons'\r\n\r\nconst DrawerSidebar = ({open, close}) => {\r\n\treturn (\r\n\t\t<Drawer className=\"drawer\" anchor=\"left\" open={open} onClose={close}>\r\n\t\t\t<div className=\"drawer__header\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\tDraw.K\r\n\t\t\t\t</div>\r\n\t\t\t<div onClick={close}>\t<Close /></div>\r\n\t\t\t</div>\r\n\t\t</Drawer>\r\n\t);\r\n};\r\n\r\nexport default DrawerSidebar;\r\n","import React, {useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {setWidthAction, toolbarAction} from '../store/actions/toolbarActions'\r\nimport {CircleIcon, HamburgerIcon, SquareIcon, StarIcon} from '../icons/Icons'\r\nimport Circle from '../Tools/Circle'\r\nimport Rect from '../Tools/Rect'\r\nimport Star from '../Tools/Star'\r\nimport DrawerSidebar from './Drawer'\r\nimport {Slider, withStyles} from '@material-ui/core'\r\n\r\nconst SettingBar = () => {\r\n\tconst selectedFigure = useSelector(state => state.toolbar.selectedTool)\r\n\tconst [open, setOpen] = useState(false)\r\n\tconst canvasState = useSelector(state => state.canvas)\r\n\tconst canvas = useSelector(state => state.canvas.canvas)\r\n\tconst dispatch = useDispatch()\r\n\tconst [idx, setIdx] = useState(null)\r\n\tconst handleClick = (tool, idx) => {\r\n\t\tdispatch(toolbarAction(tool))\r\n\t\tsetIdx(idx)\r\n\t}\r\n\r\n\r\n\tconst toggleOpen = () => setOpen(!open)\r\n\treturn (\r\n\t\t<div className=\"settingBar\">\r\n\t\t\t<div className=\"settingBar__header\">\r\n\t\t\t\t<div className=\"settingBar__hamburger\" onClick={toggleOpen}>\r\n\t\t\t\t\t<HamburgerIcon />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{[1,2,3].includes(selectedFigure) && <div className=\"weight-slider\">\r\n\t\t\t\t<PrettoSlider   valueLabelDisplay=\"auto\" min={1} max={50} onChange={(e, value) => dispatch(setWidthAction(value))} aria-label=\"pretto slider\" defaultValue={1} />\r\n\t\t\t</div>}\r\n\t\t\t{selectedFigure === 4 && \t<div className=\"settingBar__figure\">\r\n\t\t\t\t<div className={`settingBar__circle ${idx === 1 && \"activeFigure\"}`} onClick={() => handleClick(new Circle(canvas, canvasState.socket, canvasState.sessionId), 1)}>\r\n\t\t\t\t\t<CircleIcon />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`settingBar__square ${idx === 2 && \"activeFigure\"}`} onClick={() => handleClick(new Rect(canvas, canvasState.socket, canvasState.sessionId), 2)}>\r\n\t\t\t\t\t<SquareIcon />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`settingBar__star ${idx === 3 && \"activeFigure\"}`} onClick={() => handleClick(new Star(canvas, canvasState.socket, canvasState.sessionId), 3)}>\r\n\t\t\t\t\t<StarIcon />\r\n\t\t\t\t</div>\r\n\t\t\t</div>}\r\n\t\t\t<DrawerSidebar open={open} close={toggleOpen} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst PrettoSlider = withStyles({\r\n\troot: {\r\n\t\tcolor: '#3897f0',\r\n\t\theight: 8,\r\n\t},\r\n\tthumb: {\r\n\t\theight: 24,\r\n\t\twidth: 24,\r\n\t\tbackgroundColor: '#fff',\r\n\t\tborder: '2px solid currentColor',\r\n\t\tmarginTop: -8,\r\n\t\tmarginLeft: -12,\r\n\t\t'&:focus, &:hover, &$active': {\r\n\t\t\tboxShadow: 'inherit',\r\n\t\t},\r\n\t},\r\n\tactive: {},\r\n\tvalueLabel: {\r\n\t\tleft: 'calc(-50% + 4px)',\r\n\t},\r\n\ttrack: {\r\n\t\theight: 8,\r\n\t\tborderRadius: 4,\r\n\t},\r\n\trail: {\r\n\t\theight: 8,\r\n\t\tborderRadius: 4,\r\n\t},\r\n})(Slider);\r\n\r\nexport default SettingBar;\r\n","import Tool from './Tool'\r\n\r\nexport default class Brush extends Tool {\r\n\tconstructor(canvas, socket, id, method) {\r\n\t\tsuper(canvas, socket, id, method);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmouseleave = this.mouseLeaveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t}\r\n\r\n\tmouseLeaveHandler = () => {\r\n\t\tthis.mouseDown = false;\r\n\t}\r\n\tmouseUpHandler = (e) => {\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod:  'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'finish',\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.ctx.moveTo(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif (this.mouseDown) {\r\n\t\t\t// this.draw(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n\t\t\tconsole.log(e.pageX - e.target.offsetLeft)\r\n\t\t\tconsole.log(e.pageY - e.target.offsetTop)\r\n\t\t\tthis.socket.send(JSON.stringify({\r\n\t\t\t\tmethod: 'draw',\r\n\t\t\t\tid: this.id,\r\n\t\t\t\tfigure: {\r\n\t\t\t\t\ttype: 'brush' ,\r\n\t\t\t\t\tx: e.pageX - e.target.offsetLeft,\r\n\t\t\t\t\ty: e.pageY - e.target.offsetTop,\r\n\t\t\t\t}\r\n\t\t\t}))\r\n\t\t}\r\n\t}\r\n\tstatic draw = (ctx, x, y) => {\r\n\r\n\t\tctx.lineTo(x, y)\r\n\t\tctx.stroke()\r\n\t}\r\n}\r\n","import Tool from './Tool'\r\n\r\nexport default class Line extends Tool {\r\n\tconstructor(canvas, socket, id) {\r\n\t\tsuper(canvas, socket, id);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t}\r\n\r\n\tmouseUpHandler = (e) => {\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod: 'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tx: this.startX,\r\n\t\t\t\ty: this.startY,\r\n\t\t\t\tcurrentX: this.currentX,\r\n\t\t\t\tcurrentY: this.currentY,\r\n\t\t\t\tcolor: this.ctx.strokeStyle\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.startX = e.pageX - e.target.offsetLeft\r\n\t\tthis.startY = e.pageY - e.target.offsetTop\r\n\t\tthis.saved = this.canvas.toDataURL()\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif (this.mouseDown) {\r\n\t\t\tthis.currentX = e.pageX - e.target.offsetLeft\r\n\t\t\tthis.currentY = e.pageY - e.target.offsetTop\r\n\t\t\tthis.draw(this.startX, this.startY)\r\n\t\t}\r\n\t}\r\n\tdraw = (x, y, r) => {\r\n\t\tconst img = new Image()\r\n\t\timg.src = this.saved\r\n\r\n\t\tthis.ctx.strokeStyle = this.color\r\n\t\timg.onload = () => {\r\n\t\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n\t\t\tthis.ctx.beginPath()\r\n\t\t\tthis.ctx.moveTo(this.currentX, this.currentY);\r\n\t\t\tthis.ctx.lineTo(x, y);\r\n\t\t\tthis.ctx.fill()\r\n\t\t\tthis.ctx.stroke()\r\n\t\t}\r\n\t}\r\n\r\n\tstatic staticDraw = (ctx, x, y, currentX, currentY, color) => {\r\n\t\tctx.strokeStyle = color\r\n\t\tctx.beginPath()\r\n\t\tctx.moveTo(currentX, currentY);\r\n\t\tctx.lineTo(x, y);\r\n\t\tctx.fill()\r\n\t\tctx.stroke()\r\n\t}\r\n\r\n}\r\n","import {actionTypes} from './actionTypes'\r\n\r\nconst canvasrChange = (canvas) => ({\r\n\ttype: actionTypes.SET_CANVAS,\r\n\tpayload: {canvas}\r\n})\r\n\r\n\r\n\r\nexport const canvasActions = (canvas) => dispatch => {\r\n\tdispatch(canvasrChange(canvas))\r\n}\r\n\r\n\r\nexport const pushUndoAction = undo => ({\r\n\ttype: actionTypes.PUSH_UNDO,\r\n\tpayload: {undo}\r\n})\r\n\r\n\r\n\r\nexport const redoAction = () => ({\r\n\ttype: actionTypes.REDO\r\n})\r\nexport const undoAction = (canvas, undoList) => ({\r\n\ttype: actionTypes.UNDO,\r\n\tpayload: {canvas, undoList}\r\n})\r\n\r\n\r\n\r\nexport const socketAction = socket => ({\r\n\ttype: actionTypes.SET_SOCKET,\r\n\tpayload: {socket}\r\n})\r\n\r\nexport const sessionId = sessionId => ({\r\n\ttype: actionTypes.SET_SESSIONID,\r\n\tpayload: {sessionId}\r\n})\r\n\r\n\r\nexport const update = (undoList, canvas) => ({\r\n\ttype: actionTypes.UPDATE_UNDO_CANVAS,\r\n\tpayload: {undoList, canvas}\r\n})\r\nexport const updateRedo = (redoList) => ({\r\n\ttype: actionTypes.UPDATE_REDO_CANVAS,\r\n\tpayload: {redoList}\r\n})\r\n","import Tool from './Tool'\r\n\r\nexport default class Eraser extends Tool {\r\n\tconstructor(canvas, socket, id, color) {\r\n\t\tsuper(canvas, socket, id, color);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t\tthis.canvas.onmousedown = this.mouseDownHandler\r\n\t\tthis.canvas.onmouseup = this.mouseUpHandler\r\n\t\tthis.canvas.onmouseleave = this.mouseLeaveHandler\r\n\t}\r\n\tmouseLeaveHandler = () => {\r\n\t\tthis.ctx.fillStyle = this.updateColor\r\n\t\tthis.ctx.strokeStyle = this.updateColor\r\n\t}\r\n\tmouseUpHandler = (e) => {\r\n\t\tthis.ctx.fillStyle = this.updateColor\r\n\t\tthis.ctx.strokeStyle = this.updateColor\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.socket.send(JSON.stringify({\r\n\t\t\tmethod:  'draw',\r\n\t\t\tid: this.id,\r\n\t\t\tfigure: {\r\n\t\t\t\ttype: 'finish',\r\n\t\t\t}\r\n\t\t}))\r\n\t}\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tthis.mouseDown = true\r\n\t\tthis.ctx.beginPath()\r\n\t\tthis.ctx.moveTo(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n\t}\r\n\tmouseMoveHandler = (e) => {\r\n\t\tif (this.mouseDown) {\r\n\t\t\t// this.draw(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\r\n\t\t\tthis.socket.send(JSON.stringify({\r\n\t\t\t\tmethod: 'draw',\r\n\t\t\t\tid: this.id,\r\n\t\t\t\tfigure: {\r\n\t\t\t\t\ttype: 'eraser',\r\n\t\t\t\t\tx: e.pageX - e.target.offsetLeft,\r\n\t\t\t\t\ty: e.pageY - e.target.offsetTop,\r\n\t\t\t\t\twidth: this.ctx.lineWidth\r\n\t\t\t\t}\r\n\t\t\t}))\r\n\t\t}\r\n\t}\r\n\tstatic staticDraw = (ctx, x, y, width) => {\r\n\t\tctx.lineWidth = width;\r\n\t\tctx.strokeStyle = 'white'\r\n\t\tctx.lineTo(x, y)\r\n\t\tctx.stroke()\r\n\t}\r\n}\r\n","import {actionTypes} from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n\ttool: null,\r\n\tselectedTool: 1,\r\n\tmethod: 'brush',\r\n}\r\n\r\n\r\nexport const toolbarReducer = (state = initialState, {type, payload}) => {\r\n\r\n\tswitch (type) {\r\n\t\tcase actionTypes.SET_TOOL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tselectedTool: payload.tool\r\n\t\t\t}\r\n\t\tcase actionTypes.SET_WIDTH:\r\n\t\t\tconst toolWidth = state.tool;\r\n\t\t\ttoolWidth.ctx.lineWidth = parseInt(payload.width)\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttool: toolWidth\r\n\t\t\t}\r\n\t\tcase actionTypes.SET_COLOR:\r\n\t\t\tconst toolColor = state.tool;\r\n\t\t\ttoolColor.ctx.fillColor = payload.color\r\n\t\t\ttoolColor.ctx.strokeColor = payload.color\r\n\t\t\ttoolColor.ctx.fillStyle = payload.color\r\n\t\t\ttoolColor.ctx.strokeStyle = payload.color\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanvas: toolColor\r\n\t\t\t}\r\n\t\tcase actionTypes.SET_TOOLBAR:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttool: payload.tool\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import {actionTypes} from '../actions/actionTypes'\r\n\r\nconst initialState = {\r\n\tcanvas: null,\r\n\tsessionId: null,\r\n\tsocket: null,\r\n\tuserId: localStorage.getItem('session'),\r\n\tundoList : [],\r\n\tredoList : [],\r\n\tupdate: null,\r\n\tposition: {\r\n\t\tx: null,\r\n\t\ty: null,\r\n\t},\r\n\ttext: '',\r\n}\r\n\r\n\r\n\r\nexport const canvasReducer = (state = initialState, {type, payload}) => {\r\n\tswitch(type) {\r\n\t\tcase actionTypes.UPDATE_TEXTAREA:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposition: {x: payload.x, y: payload.y}\r\n\t\t\t}\r\n\t\tcase actionTypes.UPDATE_TEXT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttext: payload.text\r\n\t\t\t}\r\n\t\tcase actionTypes.UPDATE_UNDO_CANVAS: {\r\n\t\t\tconst {canvas, undoList} = payload;\r\n\t\t\tlet undoCanvas = canvas;\r\n\t\t\tlet ctxUndo = undoCanvas.getContext('2d')\r\n\r\n\t\t\tif (undoList.length > 0) {\r\n\r\n\t\t\t\tlet dataUrl = undoList.pop()\r\n\t\t\t\tlet img = new Image()\r\n\t\t\t\timg.src = dataUrl\r\n\t\t\t\timg.onload =  () => {\r\n\t\t\t\t\tctxUndo.clearRect(0,0, state.canvas.width, state.canvas.height)\r\n\t\t\t\t\tctxUndo.drawImage(img, 0, 0, state.canvas.width, state.canvas.height)\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tctxUndo.clearRect(0, 0, state.canvas.width, state.canvas.height)\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tundoList,\r\n\t\t\t\tcanvas: undoCanvas\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase actionTypes.UPDATE_REDO_CANVAS: {\r\n\t\t\tconst { redoList } = payload;\r\n\t\t\tlet redoCanvas = state.canvas;\r\n\t\t\tlet ctx = redoCanvas.getContext('2d')\r\n\t\t\tif (redoList.length > 0) {\r\n\t\t\t\tlet dataUrl = redoList.pop()\r\n\t\t\t\t// state.undoList.push(state.canvas.toDataURL())\r\n\t\t\t\tlet img = new Image()\r\n\t\t\t\timg.src = dataUrl\r\n\t\t\t\timg.onload =  () => {\r\n\t\t\t\t\tctx.clearRect(0,0, state.canvas.width, state.canvas.height)\r\n\t\t\t\t\tctx.drawImage(img, 0, 0, state.canvas.width, state.canvas.height)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tredoList,\r\n\t\t\t\tcanvas: redoCanvas\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase actionTypes.SET_SESSIONID:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsessionId: payload.sessionId\r\n\t\t\t}\r\n\t\tcase actionTypes.SET_SOCKET:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tsocket: payload.socket\r\n\t\t\t}\r\n\t\tcase actionTypes.PUSH_UNDO:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tundoList:  [...state.undoList, payload.undo]\r\n\t\t\t}\r\n\t\tcase actionTypes.REDO:\r\n\t\t\tlet redoCanvas = state.canvas;\r\n\t\t\tif (state.redoList.length > 0) {\r\n\t\t\t\tstate.undoList.push(state.canvas.toDataURL())\r\n\t\t\t\tstate.socket.send(JSON.stringify({\r\n\t\t\t\t\tmethod: 'redo',\r\n\t\t\t\t\tid: state.sessionId,\r\n\t\t\t\t\tundoList: state.undoList,\r\n\t\t\t\t\tredoList: state.redoList,\r\n\t\t\t\t}))\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanvas:  redoCanvas,\r\n\t\t\t}\r\n\t\tcase actionTypes.UNDO:\r\n\t\t\tlet undoCanvas = state.canvas;\r\n\r\n\t\t\tlet ctxUndo = undoCanvas.getContext('2d')\r\n\t\t\tif (state.undoList.length > 0) {\r\n\t\t\t\tstate.redoList.push(state.canvas.toDataURL())\r\n\t\t\t\tstate.socket.send(JSON.stringify({\r\n\t\t\t\t\tmethod: 'undo',\r\n\t\t\t\t\tid: state.sessionId,\r\n\t\t\t\t\tundoList: state.undoList,\r\n\t\t\t\t\tredoList: state.redoList,\r\n\t\t\t\t}))\r\n\r\n\t\t\t} else {\r\n\t\t\t\tctxUndo.clearRect(0, 0, state.canvas.width, state.canvas.height)\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanvas:   undoCanvas,\r\n\t\t\t}\r\n\t\tcase actionTypes.SET_CANVAS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcanvas: payload.canvas\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import { combineReducers } from 'redux'\r\nimport {toolbarReducer} from './toolbarReducers'\r\nimport {canvasReducer} from './canvasReducer'\r\n\r\n\r\nconst rootReducers = combineReducers({\r\n\t\ttoolbar: toolbarReducer,\r\n\t\tcanvas: canvasReducer\r\n})\r\n\r\n\r\nexport default rootReducers\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst middlewares = [\r\n\tthunk\r\n];\r\n\r\nfunction configureStore(initialState = {}) {\r\n\treturn createStore(\r\n\t\trootReducer,\r\n\t\tinitialState,\r\n\t\tcomposeEnhancers(applyMiddleware(...middlewares))\r\n\t);\r\n}\r\n\r\n// pass an optional param to rehydrate state on app start\r\nconst store = configureStore();\r\n\r\n// export store singleton instance\r\nexport default store;\r\n","import Drawer from './Tool'\r\nimport store from '../store/store';\r\nimport {setPositionAction, setTextAction, setToolAction, toolbarAction} from '../store/actions/toolbarActions'\r\nimport Brush from './Brush'\r\n\r\nexport default class Text extends Drawer {\r\n\tconstructor(canvas, socket, id) {\r\n\t\tsuper(canvas, socket, id);\r\n\t\tthis.listen()\r\n\t}\r\n\r\n\tlisten() {\r\n\t\tthis.canvas.onclick = this.clickHandler\r\n\t\tthis.canvas.onmouseup = this.mouseDownHandler\r\n\t\tthis.canvas.onmousemove = this.mouseMoveHandler\r\n\t}\r\n\r\n\r\n\tclickHandler = (e) => {\r\n\r\n\r\n\t}\r\n\r\n\r\n\tmouseDownHandler = (e) => {\r\n\t\tif (store.getState().canvas.text) {\r\n\r\n\t\t\tthis.socket.send(JSON.stringify({\r\n\t\t\t\tmethod: 'typing',\r\n\t\t\t\tid: this.id,\r\n\t\t\t\tposX: this.startX,\r\n\t\t\t\tposY: this.startY,\r\n\t\t\t\ttext: store.getState().canvas.text\r\n\t\t\t}))\r\n\t\t\tthis.mouseDown = true;\r\n\t\t\tstore.dispatch(toolbarAction(new Brush(this.canvas, this.socket, this.id)))\r\n\t\t\tstore.dispatch(setTextAction(''))\r\n\t\t\tstore.dispatch(setToolAction(1))\r\n\t\t\tstore.dispatch(setPositionAction(null, null))\r\n\t\t} else {\r\n\t\t\tthis.startX = e.pageX - e.target.offsetLeft\r\n\t\t\tthis.startY = e.pageY - e.target.offsetTop\r\n\t\t\tstore.dispatch(setPositionAction(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop))\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tstatic staticDraw(ctx, x, y, text) {\r\n\t\tctx.font = '20px Arial';\r\n\t\tctx.fillText(text, x, y)\r\n\t}\r\n}\r\n","import React, {useState} from 'react';\r\nimport '../styles/toolbar.scss';\r\nimport {BrushIcon, EraserIcon, FigureIcon, LineIcon, RedoIcon, TextIcon, UndoIcon} from '../icons/Icons'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport Brush from '../Tools/Brush'\r\nimport {colorChangeAction, setToolAction, setWidthAction, toolbarAction} from '../store/actions/toolbarActions'\r\nimport Line from '../Tools/Line'\r\nimport {redoAction, undoAction} from '../store/actions/canvasActions'\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport Eraser from '../Tools/Eraser'\r\nimport TextClass from '../Tools/Text'\r\n\r\nconst Toolbar = () => {\r\n\tconst [changeColor, setChangeColor] = useState('#000')\r\n\tconst canvas = useSelector(state => state.canvas.canvas)\r\n\tconst undoList = useSelector(state => state.canvas.undoList)\r\n\tconst redoList = useSelector(state => state.canvas.redoList)\r\n\tconst selectedFigure = useSelector(state => state.toolbar.selectedTool)\r\n\tconst canvasState = useSelector(state => state.canvas)\r\n\tconst color = useSelector(state => state.toolbar.color)\r\n\tconst dispatch = useDispatch()\r\n\tconst handleClick = (tool, idx) => {\r\n\t\tdispatch(toolbarAction(tool))\r\n\t\tdispatch(setToolAction(idx))\r\n\t\tif(idx === 3) {\r\n\t\t\tdispatch(setWidthAction(15))\r\n\t\t}\r\n\t}\r\n\tconst handleChangeColor = ({target: {value}}) => {\r\n\t\tdispatch(colorChangeAction(value))\r\n\t\tsetChangeColor(value)\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"toolbar\">\r\n\t\t\t<Tooltip title=\"\" placement=\"right-end\">\r\n\t\t\t\t<button className={selectedFigure === 1 ? 'active' : ''}\r\n\t\t\t\t\t\t\t\tonClick={() => handleClick(new Brush(canvas, canvasState.socket, canvasState.sessionId), 1)}>\r\n\t\t\t\t\t<BrushIcon/>\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\" placement=\"right-end\">\r\n\t\t\t\t<button className={selectedFigure === 2 ? 'active' : ''}\r\n\t\t\t\t\t\t\t\tonClick={() => handleClick(new Line(canvas, canvasState.socket, canvasState.sessionId), 2)}>\r\n\t\t\t\t\t<LineIcon/>\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\" placement=\"right-end\">\r\n\t\t\t\t<button className={selectedFigure === 3 ? 'active' : ''}\r\n\t\t\t\t\t\t\t\tonClick={() => handleClick(new Eraser(canvas, canvasState.socket, canvasState.sessionId, changeColor), 3)}>\r\n\t\t\t\t\t<EraserIcon/></button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\" placement=\"right-end\">\r\n\t\t\t\t<button className={selectedFigure === 4 ? 'active' : ''} onClick={() => dispatch(setToolAction(4))}>\r\n\t\t\t\t\t<FigureIcon/>\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\" placement=\"right-end\">\r\n\t\t\t\t<button className={selectedFigure === 5 ? 'active' : ''}\r\n\t\t\t\t\t\t\t\tonClick={() => handleClick(new TextClass(canvas, canvasState.socket, canvasState.sessionId), 5)}><TextIcon />\r\n\t\t\t\t</button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"colors\" placement=\"right-end\">\r\n\t\t\t\t<button><input id=\"color\" value={color} onChange={handleChangeColor} type=\"color\"/></button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\"  placement=\"left-start\">\r\n\t\t\t\t<button className={!undoList.length && 'disabled'} onClick={() => dispatch(undoAction())}><UndoIcon /></button>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Tooltip title=\"\"    placement=\"left-start\">\r\n\t\t\t\t<button className={!redoList.length && 'disabled'}  onClick={() => dispatch(redoAction())}><RedoIcon /></button>\r\n\t\t\t</Tooltip>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Toolbar;\r\n","import React, {useEffect, useRef} from 'react';\r\nimport '../styles/canvas.scss'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {\r\n\tcanvasActions,\r\n\tpushUndoAction,\r\n\tsessionId,\r\n\tsocketAction,\r\n\tupdate, updateRedo\r\n} from '../store/actions/canvasActions'\r\nimport {setTextAction,  toolbarAction} from '../store/actions/toolbarActions'\r\nimport Brush from '../Tools/Brush'\r\nimport {useParams} from 'react-router-dom'\r\nimport Rect from '../Tools/Rect'\r\nimport Circle from '../Tools/Circle'\r\nimport Line from '../Tools/Line'\r\nimport Eraser from '../Tools/Eraser'\r\nimport Star from '../Tools/Star'\r\nimport TextClass from '../Tools/Text'\r\n\r\nconst Canvas = () => {\r\n\tconst canvasRef = useRef()\r\n\tconst position = useSelector(state => state.canvas.position)\r\n\tconst text = useSelector(state => state.canvas.text)\r\n\tconst selectedFigure = useSelector(state => state.toolbar.selectedTool)\r\n\tconst textRef = useRef()\r\n\r\n\tuseEffect(() => {\r\n\t\tif (selectedFigure === 5) {\r\n\t\t\ttextRef.current.focus()\r\n\t\t}\r\n\t}, [position])\r\n\r\n\r\n\r\n\tconst dispatch = useDispatch()\r\n\tconst id = useParams().id\r\n\tuseEffect(() => {\r\n\t\tdispatch(canvasActions(canvasRef.current))\r\n\t}, [dispatch])\r\n\tconst mouseDownHandler = () => {\r\n\t\tdispatch(pushUndoAction(canvasRef.current.toDataURL()))\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst socket = new WebSocket(`wss://draw-app-canvas.herokuapp.com/`)\r\n\t\tsocket.onopen = () => {\r\n\t\t\tdispatch(socketAction(socket))\r\n\t\t\tdispatch(sessionId(id))\r\n\t\t\tdispatch(toolbarAction(new Brush(canvasRef.current, socket, id)))\r\n\t\t\tsocket.send(JSON.stringify({\r\n\t\t\t\tid,\r\n\t\t\t\tmethod: 'connection'\r\n\t\t\t}))\r\n\t\t}\r\n\t\tsocket.onmessage = (event) => {\r\n\t\t\tlet msg = JSON.parse(event.data)\r\n\t\t\tswitch (msg.method) {\r\n\t\t\t\tcase 'connection':\r\n\t\t\t\t\tconsole.log('Connected')\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'draw':\r\n\t\t\t\t\tdrawHandler(msg)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'undo':\r\n\t\t\t\t\tconsole.log('undo', msg)\r\n\t\t\t\t\tundoFn(msg)\r\n\t\t\t\t\tbreak\r\n\t\t\t\tcase 'redo':\r\n\t\t\t\t\tredoFn(msg)\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'typing':\r\n\t\t\t\t\ttypingFn(msg)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}, [])\r\n\tconst typingFn = (msg) => {\r\n\t\tconst ctx = canvasRef.current.getContext('2d')\r\n\r\n\t\tTextClass.staticDraw(ctx, msg.posX, msg.posY, msg.text)\r\n\t}\r\n\tconst redoFn = (msg) => dispatch(updateRedo(msg.redoList))\r\n\tconst undoFn = (msg) => {\r\n\t\tdispatch(update(msg.undoList, canvasRef.current))\r\n\t}\r\n\tconst drawHandler = (msg) => {\r\n\t\tconst figure = msg.figure\r\n\t\tconst ctx = canvasRef.current.getContext('2d')\r\n\t\tswitch (figure.type) {\r\n\t\t\tcase 'brush':\r\n\t\t\t\tBrush.draw(ctx, figure.x, figure.y)\r\n\t\t\t\tbreak\r\n\t\t\tcase 'eraser':\r\n\t\t\t\tEraser.staticDraw(ctx, figure.x, figure.y, figure.width)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'rect':\r\n\t\t\t\tRect.staticDraw(ctx, figure.x, figure.y, figure.w, figure.h, figure.color)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'circle':\r\n\t\t\t\tCircle.staticDraw(ctx, figure.x, figure.y, figure.r, figure.color)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'line':\r\n\t\t\t\tLine.staticDraw(ctx, figure.x, figure.y, figure.currentX, figure.currentY, figure.color)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'star':\r\n\t\t\t\tStar.staticDraw(ctx, figure.cx, figure.cy, figure.spikes, figure.outerRadius, figure.innerRadius, figure.color)\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'finish':\r\n\t\t\t\tctx.beginPath()\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconsole.log(position)\r\n\treturn (\r\n\t\t<div className=\"canvas\">\r\n\t\t\t<textarea\r\n\t\t\t\tautoFocus={true}\r\n\t\t\t\tref={textRef}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\ttop: position.y + 80,\r\n\t\t\t\t\tleft: position.x + 160,\r\n\t\t\t\t\tdisplay: position.x ? '' : 'none'\r\n\t\t\t\t}}\r\n\t\t\t\tonBlur={() => {}}\r\n\t\t\t\tvalue={text}\r\n\t\t\t\tonChange={({target: {value}}) => dispatch(setTextAction(value))}/>\r\n\t\t\t<canvas onMouseDown={() => mouseDownHandler()} ref={canvasRef} width={1200} height={500}/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Canvas;\r\n","import React from 'react';\nimport {Switch, Route, Redirect} from 'react-router-dom'\nimport './styles/app.scss';\nimport SettingBar from './components/SettingBar'\nimport Toolbar from './components/Toolbar'\nimport Canvas from './components/Canvas'\n\n\n\nfunction App() {\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<Switch>\n\t\t\t\t<Route path='/:id'>\n\t\t\t\t\t<SettingBar />\n\t\t\t\t\t\t<div className=\"contentWrap\">\n\t\t\t\t\t\t<Toolbar/>\n\t\t\t\t\t\t<Canvas/>\n\t\t\t\t\t\t</div>\n\t\t\t\t</Route>\n\t\t\t\t<Redirect  to={`f${(+new Date()).toString(16)}`} />\n\t\t\t</Switch>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {Provider} from 'react-redux'\nimport store from './store/store'\nimport {BrowserRouter} from 'react-router-dom'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BrowserRouter>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App/>\n\t\t\t</Provider>\n\t\t</BrowserRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}